#!/bin/bash
# SET SOME VARIABLES

# FOLDER TO KEEP EXTRA SQL FOR PROCESSING (indicators.sh)
SQL="sql"

# INPUT COUNTRY DATASET (needed for attributes)
V_COUNTRY="gaul_eez_dissolved_201912"

# INPUT ECOREGIONS DATASET (needed for attributes)
V_ECOREGION="ecoregions_2020_atts"

# MODULAR VARIABLES
# WDPA RELEASE USED
I_RELEASE="202101" # IT IS USED LATER IN DERIVED VARIABLES (eg: V_WDPA is given BY I_WDPA_I_RELEASE) 
# WDPA TYPE USED (eg: wdpa/oecm/wdpa_oecm); IT IS USED LATER IN DERIVED VARIABLES (eg: V_WDPA is given BY I_WDPA_I_RELEASE) 
I_WDPA="wdpa"
# CEP TYPE USED (eg: cep/cep_oecm); IT IS USED LATER IN DERIVED VARIABLES (eg: V_CEP is given BY I_CEP_I_RELEASE) 
I_CEP="cep" ## define here if cep, cep_oecm
##DERIVED VARIABLES
# INPUTS
# INPUT WDPA DATASET (needed for attributes) - DERIVED AS I_WDPA_I_RELEASE - MUST BE PRESENT IN PROTECTED_SITES SCHEMA BEFORE LAUNCHING THE SCRIPT!
V_WDPA=${I_WDPA}"_"${I_RELEASE}
# INPUT CEP DATASET (needed for attributes) - DERIVED AS I_CEP_I_RELEASE - MUST BE PRESENT IN CEP SCHEMA BEFORE LAUNCHING THE SCRIPT!
V_CEP=${I_CEP}"_"${I_RELEASE} # MUST BE PRESENT CEP!
# INPUT CEP-DERIVED INDICATORS SCHEMA (EG: GRASS TABLES to be aggregated) - DERIVED AS I_RELEASE_I_CEP_IN - # MUST EXISTS BEFORE LAUNCHING THE SCRIPT!
V_RCEP_IN="results_"${I_RELEASE}"_"${I_CEP}"_in"
# INPUT NON-CEP-DERIVED INDICATORS SCHEMA - DERIVED AS I_RELEASE_I_CEP_IN - # MUST EXISTS BEFORE LAUNCHING THE SCRIPT!
V_R_NON_CEP="results_"${I_RELEASE}"_non_"${I_CEP}
## OUTPUTS
# OUTPUT CEP-DERIVED INDICATORS SCHEMA (EG: GRASS TABLES after being aggregated) - DERIVED AS I_RELEASE_I_CEP_OUT - # IT IS DROPPED AND CREATED AT FIRST STEP OF indicators.sh script
V_RCEP_OUT="results_"${I_RELEASE}"_"${I_CEP}"_out" 


## SPECIFIC VARIABLES

###----------------------------------
### THEME 200-conservation
###----------------------------------
### SUBTHEME 201_cep_conservation_mta
V_TARGET=0.17
###----------------------------------
### THEME 300 carbon
###----------------------------------
### SUBTHEME 301_cep_carbon_above_ground
###----------------------------------------
I_THEME_301="r_univar_cep_agc2017_100m"
V_THEME_301=${I_THEME_301}"_"${I_RELEASE}
###----------------------------------------
### SUBTHEME 302_cep_carbon_below_ground
###----------------------------------------
I_THEME_302="r_univar_cep_bgc2017_100m"
V_THEME_302=${I_THEME_302}"_"${I_RELEASE}
###----------------------------------------
### SUBTHEME 303_cep_carbon_soil_organic
I_THEME_303="r_univar_cep_gsoc_tot"
V_THEME_303=${I_THEME_303}"_"${I_RELEASE}
###----------------------------------------
### SUBTHEME 304_cep_carbon_total
###----------------------------------------
I_THEME_304="r_univar_cep_carbon_tot"
V_THEME_304=${I_THEME_304}"_"${I_RELEASE}

###----------------------------------
### THEME 500_elevation_profile
###----------------------------------
### SUBTHEME 501_elevation_profile
###----------------------------------------
I_THEME_501a="r_univar_cep_gebco2020"
V_THEME_501a=${I_THEME_501a}"_"${I_RELEASE}
V_NAME_501a="elevation_profile_intermediate"
###----------------------------------------
### THEME 600_global_forest_cover
###----------------------------------------
### SUBTHEME 601_global_forest_gain
###----------------------------------------
I_THEME_601="r_stats_cep_gfc_gain_over30"
V_THEME_601=${I_THEME_601}"_"${I_RELEASE}
###----------------------------------------
### SUBTHEME 602_global_forest_loss
###----------------------------------------
I_THEME_602="r_stats_cep_gfc_lossyear_over30"
V_THEME_602=${I_THEME_602}"_"${I_RELEASE}
###----------------------------------------
### SUBTHEME 603_global_forest_treecover
###----------------------------------------
I_THEME_603="r_univar_cep_gfc_treecover_over30"
V_THEME_603=${I_THEME_603}"_"${I_RELEASE}
###----------------------------------------
### THEME 800_land_cover
###----------------------------------------
### SUBTHEME 801_lc_copernicus
I_THEME_801="r_stats_cep_copernicus_lc_2019"
V_THEME_801=${I_THEME_801}"_"${I_RELEASE}
V_NAME_801="lc_copernicus"
###----------------------------------------
### SUBTHEME 805_land_cover_esa
###----------------------------------------
### 805a_lc_esa_1995
I_THEME_805a="r_stats_cep_esalc_1995"
V_THEME_805a=${I_THEME_805a}"_"${I_RELEASE}
V_NAME_805a="lc_esa_1995"
### 805b_lc_esa_2000
I_THEME_805b="r_stats_cep_esalc_2000"
V_THEME_805b=${I_THEME_805b}"_"${I_RELEASE}
V_NAME_805b="lc_esa_2000"
### 805c_lc_esa_2005
I_THEME_805c="r_stats_cep_esalc_2005"
V_THEME_805c=${I_THEME_805c}"_"${I_RELEASE}
V_NAME_805c="lc_esa_2005"
### 805d_lc_esa_2010
I_THEME_805d="r_stats_cep_esalc_2010"
V_THEME_805d=${I_THEME_805d}"_"${I_RELEASE}
V_NAME_805d="lc_esa_2010"
### 805e_lc_esa_2015
I_THEME_805e="r_stats_cep_esalc_2015"
V_THEME_805e=${I_THEME_805e}"_"${I_RELEASE}
V_NAME_805e="lc_esa_2015"
###----------------------------------------
### SUBTHEME 806_land_cover_change_esa
###----------------------------------------
### 806a_lcc_esa_2015
I_THEME_806a="r_stats_cep_esa_lcc_1995_2015"
V_THEME_806a=${I_THEME_806a}"_"${I_RELEASE}
V_NAME_806a="lcc_esa"

###----------------------------------
### THEME 900_land_degradation
###----------------------------------------
### SUBTHEME 901_land_degradation
I_THEME_901="r_stats_cep_lpd"
V_THEME_901=${I_THEME_901}"_"${I_RELEASE}
V_NAME_901="lpd"

###----------------------------------
### THEME 1000_land_fragmentation
###----------------------------------------
### SUBTHEME 1001_mspa_land_fragmentation
### 1001a_mspa_1995
I_THEME_1001a="r_stats_cep_mspa_lc_1995"
V_THEME_1001a=${I_THEME_1001a}"_"${I_RELEASE}
V_NAME_1001a="mspa_1995"
### 1001b_mspa_2000
I_THEME_1001b="r_stats_cep_mspa_lc_2000"
V_THEME_1001b=${I_THEME_1001b}"_"${I_RELEASE}
V_NAME_1001b="mspa_2000"
### 1001c_mspa_2005
I_THEME_1001c="r_stats_cep_mspa_lc_2005"
V_THEME_1001c=${I_THEME_1001c}"_"${I_RELEASE}
V_NAME_1001c="mspa_2005"
### 1001d_mspa_2010
I_THEME_1001d="r_stats_cep_mspa_lc_2010"
V_THEME_1001d=${I_THEME_1001d}"_"${I_RELEASE}
V_NAME_1001d="mspa_2010"
### 1001e_mspa_2015
I_THEME_1001e="r_stats_cep_mspa_lc_2015"
V_THEME_1001e=${I_THEME_1001e}"_"${I_RELEASE}
V_NAME_1001e="mspa_2015"

###----------------------------------------
### THEME 1100_pressure
###----------------------------------------
### SUBTHEME 1102_pressure_builtup
###----------------------------------------
I_THEME_1102="r_stats_cep_builtup"
V_THEME_1102=${I_THEME_1102}"_"${I_RELEASE}
V_NAME_1102="p_builtup"
###----------------------------------------
### SUBTHEME 1105_pressure_population
###----------------------------------------
### 1105a_pressure_population_first_epoch
I_THEME_1105a="r_univar_cep_ghs_pop_9as_2000"
V_THEME_1105a=${I_THEME_1105a}"_"${I_RELEASE}
V_NAME_1105a="pressure_population_first_epoch"
### 1105b_pressure_population_last_epoch
I_THEME_1105b="r_univar_cep_ghs_pop_9as_2015"
V_THEME_1105b=${I_THEME_1105b}"_"${I_RELEASE}
V_NAME_1105b="pressure_population_last_epoch"
### 1105_pressure_population
I_THEME_1105="cid_area_cep_ghs_pop_9as"
V_THEME_1105=${I_THEME_1105}"_"${I_RELEASE}
###----------------------------------------
### THEME 1300 water_surface_inland
###----------------------------------------
### 1300_water_surface_inland
I_THEME_1300="r_stats_cep_gsw_transitions"
V_THEME_1300=${I_THEME_1300}"_"${I_RELEASE}
###----------------------------------------

###----------------------------------------
### THEME 1200 SPECIES
###----------------------------------------
### SUBTHEME 1201_corals
V_TOPIC_1201="corals"
I_THEME_1201="r_stats_cep_species_"${V_TOPIC_1201}
V_THEME_1201=${I_THEME_1201}"_"${I_RELEASE}
V_NAME_1201="species_"${V_TOPIC_1201}
### SUBTHEME 1202_amphibians
V_TOPIC_1202="amphibians"
I_THEME_1202="r_stats_cep_species_"${V_TOPIC_1202}
V_THEME_1202=${I_THEME_1202}"_"${I_RELEASE}
V_NAME_1202="species_"${V_TOPIC_1202}
### SUBTHEME 1203_sharks_rays_chimaeras
V_TOPIC_1203="sharks_rays_chimaeras"
I_THEME_1203="r_stats_cep_species_"${V_TOPIC_1203}
V_THEME_1203=${I_THEME_1203}"_"${I_RELEASE}
V_NAME_1203="species_"${V_TOPIC_1203}
### SUBTHEME 1204_mammals
V_TOPIC_1204="mammals"
I_THEME_1204="r_stats_cep_species_"${V_TOPIC_1204}
V_THEME_1204=${I_THEME_1204}"_"${I_RELEASE}
V_NAME_1204="species_"${V_TOPIC_1204}
### SUBTHEME 1205_birds
V_TOPIC_1205="birds"
I_THEME_1205="r_stats_cep_species_"${V_TOPIC_1205}
V_THEME_1205=${I_THEME_1205}"_"${I_RELEASE}
V_NAME_1205="species_"${V_TOPIC_1205}
##########################################





# FINAL OUTPUTS
V_REST="dopa_41" # THIS IS THE OUTPUT SCHEMA FOR FINAL TABLES AND FUNCTIONS; EG: DOPA_41. IT IS DROP AND CREATED;

## database parameters
HOST="dopaprc"
#HOST="gosling"
#HOST="localhost"
USER="h05ibex"
DB="wolfe"
PO=5432

# DO NOT TOUCH THE FOLLOWING VALUES
dbpar1="host=${HOST} user=${USER} dbname=${DB} port=${PO}"
dbpar2="-h ${HOST} -U ${USER} -d ${DB} -p ${PO}"
